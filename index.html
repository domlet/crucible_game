<!DOCTYPE html>
<html>
<head>
    <html lang="en">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <title>Charades or Pictionary</title>
    <link rel="stylesheet" href="style.css"">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Hind">
    <script src="https://code.jquery.com/jquery-3.5.0.js"></script>
</head>
<body>
    
    <!-- GAMES -->
    <div id="gamesInstructions" class="instructions">Game:</div>
    <div id="games" class="options"></div>
    <!-- DEPARTMENTS -->
    <div id="departmentsInstructions" class="instructions">Departments:</div>
    <div id="departments" class="options"></div>
    <!-- PROMPTS -->
    <div id="playInstructions" class="instructions">Click for a prompt:</div>
    <div id="prompts" class="options" onclick='play()'>
        <div id="prompts" class="colorful" onclick='play()'>
            <span id="promptArea" class="options">play</span>
        </div>
    </div>
    <div class="instructions"><a href="" onclick="">Start over</a>.</div>

    <script>
        const games = [
            "Charades",
            "Pictionary"
        ]
        const departments = [
            "Blacksmithing",
            "Ceramics",
            "Foundry",
            "Jewelry",
            "Kinetics and Electronics", // spaces cause a problem for id
            "Woodworking"
        ]
        const allPrompts = {
            'Blacksmithing' : [
                "Sample blacksmithing prompt 1.",
                "Sample blacksmithing prompt 2.",
                "Sample blacksmithing prompt 3." ],
            'Ceramics' : [
                "Use the 'score and slip' method to connect two pieces.",
                "Use two pinched pots to handbuild a head and body.",
                "Use sticks to roll a slab with even thickness.",
                "Build a bowl using a coil and a mold.",
                "Pieces are most brittle when they are bone dry.",
                "Clean your tools and put them away.",
                "Wipe down your work surface with a large wet sponge.",
                "Silica dust is harmful to inhale.",
                "Don't forget about a piece you put in front of a fan.",
                "When you paint on the glaze, everything appears green.",
                "Use a stamp to create a pattern on the clay.",
                "An air bubble can cause a piece to explode in the kiln." ],
            'Foundry' : [
                "Sample foundry prompt 1.",
                "Sample foundry prompt 2.",
                "Sample foundry prompt 3." ],
            'Jewelry' : [
                "Sample jewelry prompt 1.",
                "Sample jewelry prompt 2.",
                "Sample jewelry prompt 3." ],
            'Kinetics and Electronics' : [
                "Sample kinetics and electronics prompt 1.",
                "Sample kinetics and electronics prompt 2.",
                "Sample kinetics and electronics prompt 3." ],
            'Woodworking' : [
                "Use a gouge to cut against the grain.",
                "What happens when you drop a gouge on a concrete floor?",
                "Use tracing paper to draw a pattern onto the wood.",
                "Seal a project to keep the wood clean." ]
        }
        // List all games.
        for (i=0;i<games.length;i++) {
            document.getElementById('games').innerHTML += 
            "<div id='" + games[i] + "' onclick='selectGame()'>" + games[i] + "</div>";
        }
        // List all departments.
        for (i=0;i<departments.length;i++) {
            document.getElementById('departments').innerHTML += 
            "<div id='" + departments[i] + "' onclick='selectCategory()'>" + departments[i] + "</div>";
        }
        // Create empty arrays.
        var gamesOn = []
        var departmentsOn = []
        
        // Choose one game.
        function selectGame(){
            const clickedItem = event.target.id            
            for (i=0;i<gamesOn.length;i++) {
                document.getElementById(gamesOn[i]).classList.remove('itemOn')
            }
            gamesOn.splice(0, gamesOn.length)
            gamesOn.push(clickedItem)
            event.target.classList.add("itemOn")
            console.log("Selected " + clickedItem + ".")
            console.log("Games on:" + JSON.stringify(gamesOn))
        }
        // Choose departments.
        function selectCategory(){
            const clickedItem = event.target.id            
            if (departmentsOn.indexOf(clickedItem) <= -1) {
                departmentsOn.push(clickedItem)
                event.target.classList.add("itemOn")
                console.log("Added " + clickedItem + ".")
            } else {
                departmentsOn = departmentsOn.filter(department => department !== (clickedItem))
                event.target.classList.remove("itemOn")
                console.log("Removed " + clickedItem + ".")
            }
            console.log("Departments on:" + JSON.stringify(departmentsOn))
        }   
        // When user clicks the 'play' button...
        function play(){
            if (gamesOn.length == 0 | undefined && departmentsOn.length == 0 | undefined) {
                document.getElementById('gamesInstructions').innerHTML = "<span class='alert'> Please select a game:"
                document.getElementById('departmentsInstructions').innerHTML = "<span class='alert'> Please select a department:"
            } else if (gamesOn.length == 0 | undefined) {
                document.getElementById('gamesInstructions').innerHTML = "<span class='alert'> Please select a game:"
            } else if (departmentsOn.length == 0 | undefined) {
                document.getElementById('departmentsInstructions').innerHTML = "<span class='alert'> Please select a department:"
            } else {
                // Display selected categories only.
                document.getElementById('games').innerHTML = "<div class='itemOn'>" + gamesOn[0] + "</div>"
                document.getElementById('departments').innerHTML = ""
                for (i=0;i<departmentsOn.length;i++) {
                    document.getElementById('departments').innerHTML += 
                    "<div id='" + departmentsOn[i] + "' class='itemOn'>" + departmentsOn[i] + "</div>";
                }
                // Display game prompts.
                // event.target.classList.remove("colorful")
                let randomDepartmentOn = departmentsOn[Math.floor(Math.random() * departmentsOn.length)];
                let promptsOn = allPrompts[randomDepartmentOn]
                let randomPromptOn = promptsOn[Math.floor(Math.random() * promptsOn.length)];
                document.getElementById('promptArea').innerHTML = randomPromptOn
            }
        }
    </script>

</body>
</html>