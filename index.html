<!DOCTYPE html>
<html>
<head>
    <html lang="en">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <title>Charades or Pictionary</title>
    <link rel="stylesheet" href="style.css"">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Hind">
    <script src="https://code.jquery.com/jquery-3.5.0.js"></script>
</head>
<body>
    
    <!-- GAMES -->
    <div id="gamesInstructions" class="instructions">Game:</div>
    <div id="games" class="options"></div>
    <!-- DEPARTMENTS -->
    <div id="departmentsInstructions" class="instructions">Departments:</div>
    <div id="departments" class="options"></div>
    
    <script>
        const games = [
            "Charades",
            "Pictionary"
        ]
        const departments = [
            "Blacksmithing",
            "Ceramics",
            "Foundry",
            "Jewelry",
            "Kinetics and Electronics", // spaces cause a problem for id
            "Woodworking"
        ]
        const allPrompts = {
            'Blacksmithing' : [
                "sample blacksmithing prompt 1",
                "sample blacksmithing prompt 2",
                "sample blacksmithing prompt 3" ],
            'Ceramics' : [
                "score and slip",
                "use two pinched pots to handbuild a head and body",
                "use sticks to roll a slab with even thickness",
                "build a bowl using a coil and a mold",
                "pieces are most brittle when they are bone dry",
                "clean your tools and put them away",
                "wipe down your work surface with a large sponge",
                "silica dust is harmful to inhale",
                "don't forget about a piece you put in front of a fan",
                "when you paint on the glaze, everything appears green",
                "use a stamp to create a pattern on the clay",
                "a piece with an air bubble can explode in the kiln" ],
            'Foundry' : [
                "sample foundry prompt 1",
                "sample foundry prompt 2",
                "sample foundry prompt 3" ],
            'Jewelry' : [
                "sample jewelry prompt 1",
                "sample jewelry prompt 2",
                "sample jewelry prompt 3" ],
            'Kinetics and Electronics' : [
                "sample kinetics and electronics prompt 1",
                "sample kinetics and electronics prompt 2",
                "sample kinetics and electronics prompt 3" ],
            'Woodworking' : [
                "using a gouge against the grain",
                "never drop a gouge on the concrete floor",
                "trace a pattern onto a piece of wood",
                "seal a project " ]
        }
        // List all games.
        for (i=0;i<games.length;i++) {
            document.getElementById('games').innerHTML += 
            "<div id='" + games[i] + "' onclick='selectGame()'>" + games[i] + "</div>";
        }
        // List all departments.
        for (i=0;i<departments.length;i++) {
            document.getElementById('departments').innerHTML += 
            "<div id='" + departments[i] + "' onclick='selectCategory()'>" + departments[i] + "</div>";
        }
        // Create empty arrays.
        var gamesOn = []
        var departmentsOn = []
        
        // Choose one game.
        function selectGame(){
            const clickedItem = event.target.id            
            for (i=0;i<gamesOn.length;i++) {
                document.getElementById(gamesOn[i]).classList.remove('itemOn')
            }
            gamesOn.splice(0, gamesOn.length)
            gamesOn.push(clickedItem)
            event.target.classList.add("itemOn")
            console.log("Selected " + clickedItem + ".")
            console.log("Games on:" + JSON.stringify(gamesOn))
        }
        // Choose departments.
        function selectCategory(){
            const clickedItem = event.target.id            
            if (departmentsOn.indexOf(clickedItem) <= -1) {
                departmentsOn.push(clickedItem)
                event.target.classList.add("itemOn")
                console.log("Added " + clickedItem + ".")
            } else {
                departmentsOn = departmentsOn.filter(department => department !== (clickedItem))
                event.target.classList.remove("itemOn")
                console.log("Removed " + clickedItem + ".")
            }
            console.log("Departments on:" + JSON.stringify(departmentsOn))
        }   
        // When user clicks the 'play' button...
        function play(){
            // Display selected categories only.
            document.getElementById('games').innerHTML = "<div class='itemOn'>" + gamesOn[0] + "</div>"
            document.getElementById('departments').innerHTML = ""
            for (i=0;i<departmentsOn.length;i++) {
                document.getElementById('departments').innerHTML += 
                "<div id='" + departmentsOn[i] + "' class='itemOn'>" + departmentsOn[i] + "</div>";
            }
            // Display game prompts.
            event.target.classList.remove("colorful")
            // Randomly select an active department, prompt, and display the prompt.
            // let randomDepartmentOn = JSON.stringify(departmentsOn[Math.floor(Math.random() * departmentsOn.length)]);
            let randomDepartmentOn = departmentsOn[Math.floor(Math.random() * departmentsOn.length)];
            let promptsOn = allPrompts[randomDepartmentOn]
            let randomPromptOn = promptsOn[Math.floor(Math.random() * promptsOn.length)];
            document.getElementById('playArea').innerHTML = randomPromptOn
        }
    </script>
    
    <div id="playInstructions" class="instructions">Click:</div>
        <div id="play" class="options">
            <div id="playArea" onclick='play()' class="colorful">play</div>
        </div>
    <div class="instructions"><a href="" onclick="">Start over</a>.</div>

</body>
</html>